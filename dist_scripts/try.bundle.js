!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"registararGenerate",value:function(e){var t=e;t.hasAttribute("id")&&(this.__id=t.getAttribute("id").trim()),t.hasAttribute("class")&&(this.__classnames=t.getAttribute("class").replace(/\s+/gi," ").trim().split(" "))}},{key:"registerRender",value:function(e){!!this.__id&&(e.id_render_map[this.__id]=!0),this.__classnames&&this.__classnames.forEach(function(t){e.class_render_map[t]=!0})}},{key:"deregisterRender",value:function(e){!!this.__id&&(e.id_render_map[this.__id]=!1),this.__classnames&&this.__classnames.forEach(function(t){e.class_render_map[t]=!1})}}]),t}(u.PhraseNode);t.RefableNode=s},function(e,t,n){"use strict";function r(e){return e[e.length-1]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){var r=e.childNodes.length,a=void 0,u=e.childNodes.item(r-1).nodeName;if(!(u in n))throw new Error("Unrecognized child <"+u+">...</"+u+">");(a=n[u](e.childNodes.item(r-1),t))instanceof o.SpaceNode&&i.default(t.ignore_spaces)&&(a=i.default(t.next_stack));for(var s=r-2;s>-1;s--){t.next_stack.push(a);var c=e.childNodes.item(s).nodeName,l=void 0;if(!(c in n))throw new Error("Unrecognized child <"+c+">...</"+c+">");l=n[c](e.childNodes.item(s),t),l instanceof o.SpaceNode&&i.default(t.ignore_spaces)||(a=l,t.next_stack.pop())}return a}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=n(1);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(6);t.default=o.default(r.default,["if","text","maybe","either","select","spaceless","unless","data","#text","ref"])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,n){if(r(this,e),this.__node_name=this.constructor.name,!this.validateNodeName(t.nodeName))throw new Error('Tag name "'+t.nodeName+'" not supported.');this.init(t,n)}return o(e,[{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:case"end":return e.stop()}},e,this)})},{key:"setNextNode",value:function(e){this.__next_node=e}},{key:"next",value:function(){return this.__next_node}}]),e}();t.PhraseNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),o=n(9),i=n(17),a=n(18),u=n(19),s=n(20),c=n(21),l=n(22),f=n(23),p=n(24),h=n(25),d=n(26),m=n(27),v=n(8),b=n(28),y=n(1),g=function(e,t){return new p.OrNode(e,t)};t.default={this:g,or:g,if:function(e,t){return new o.IfNode(e,t)},text:function(e,t){return new r.TextNode(e,t)},maybe:function(e,t){return new i.MaybeNode(e,t)},either:function(e,t){return new a.EitherNode(e,t)},select:function(e,t){return new u.SelectNode(e,t)},for:function(e,t){return new s.ForNode(e,t)},spaceless:function(e,t){return new d.SpacelessNode(e,t)},unless:function(e,t){return new c.UnlessNode(e,t)},then:function(e,t){return new l.ThenNode(e,t)},else:function(e,t){return new f.ElseNode(e,t)},data:function(e,t){return new h.DataNode(e,t)},ref:function(e,t){return new b.RefNode(e,t)},"#text":function(e,t){return e.nodeValue.trim()?new m.RawTextNode(e,t):y.default(t.next_stack)instanceof v.SpaceNode?y.default(t.next_stack):new v.SpaceNode(e,t)}}},function(e,t,n){"use strict";function r(e,t){var n={};return t.forEach(function(t){return n[t]=e[t]}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){for(var n in e)t[n]=e[n]}function o(e,t){var n=e.prototype;if(Object.create){var o=Object.create(t.prototype);n.__proto__=o}if(!(n instanceof t)){var i=function(){};i.prototype=t.prototype,i=new i,r(n,i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}function i(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ie[e]),this.message=ie[e],Error.captureStackTrace&&Error.captureStackTrace(this,i);return n.code=e,t&&(this.message=this.message+": "+t),n}function a(){}function u(e,t){this._node=e,this._refresh=t,s(this)}function s(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);$(e,"length",n.length),r(n,e),e._inc=t}}function c(){}function l(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function f(e,t,n,r){if(r?t[l(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var o=e.ownerDocument;o&&(r&&g(o,e,r),y(o,e,n))}}function p(e,t,n){var r=l(t,n);if(!(r>=0))throw i(ue,new Error(e.tagName+"@"+n));for(var o=t.length-1;r<o;)t[r]=t[++r];if(t.length=o,e){var a=e.ownerDocument;a&&(g(a,e,n),n.ownerElement=null)}}function h(e){if(this._features={},e)for(var t in e)this._features=e[t]}function d(){}function m(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function v(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(v(e,t))return!0}while(e=e.nextSibling)}function b(){}function y(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function g(e,t,n,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function _(e,t,n){if(e&&e._inc){e._inc++;var r=t.childNodes;if(n)r[r.length++]=n;else{for(var o=t.firstChild,i=0;o;)r[i++]=o,o=o.nextSibling;r.length=i}}}function w(e,t){var n=t.previousSibling,r=t.nextSibling;return n?n.nextSibling=r:e.firstChild=r,r?r.previousSibling=n:e.lastChild=n,_(e.ownerDocument,e),t}function N(e,t,n){var r=t.parentNode;if(r&&r.removeChild(t),t.nodeType===ne){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var a=n?n.previousSibling:e.lastChild;o.previousSibling=a,i.nextSibling=n,a?a.nextSibling=o:e.firstChild=o,null==n?e.lastChild=i:n.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return _(e.ownerDocument||e,e),t.nodeType==ne&&(t.firstChild=t.lastChild=null),t}function O(e,t){var n=t.parentNode;if(n){var r=e.lastChild;n.removeChild(t);var r=e.lastChild}var r=e.lastChild;return t.parentNode=e,t.previousSibling=r,t.nextSibling=null,r?r.nextSibling=t:e.firstChild=t,e.lastChild=t,_(e.ownerDocument,e,t),t}function x(){this._nsMap={}}function E(){}function k(){}function R(){}function j(){}function T(){}function P(){}function S(){}function D(){}function C(){}function A(){}function I(){}function M(){}function F(e,t){var n=[],r=9==this.nodeType?this.documentElement:this,o=r.prefix,i=r.namespaceURI;if(i&&null==o){var o=r.lookupPrefix(i);if(null==o)var a=[{namespace:i,prefix:null}]}return L(this,n,e,t,a),n.join("")}function U(e,t,n){var r=e.prefix||"",o=e.namespaceURI;if(!r&&!o)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=n.length;i--;){var a=n[i];if(a.prefix==r)return a.namespace!=o}return!0}function L(e,t,n,r,o){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case q:o||(o=[]);var i=(o.length,e.attributes),a=i.length,u=e.firstChild,s=e.tagName;n=G===e.namespaceURI||n,t.push("<",s);for(var c=0;c<a;c++){var l=i.item(c);"xmlns"==l.prefix?o.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&o.push({prefix:"",namespace:l.value})}for(var c=0;c<a;c++){var l=i.item(c);if(U(l,n,o)){var f=l.prefix||"",p=l.namespaceURI,h=f?" xmlns:"+f:" xmlns";t.push(h,'="',p,'"'),o.push({prefix:f,namespace:p})}L(l,t,n,r,o)}if(U(e,n,o)){var f=e.prefix||"",p=e.namespaceURI,h=f?" xmlns:"+f:" xmlns";t.push(h,'="',p,'"'),o.push({prefix:f,namespace:p})}if(u||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(t.push(">"),n&&/^script$/i.test(s))for(;u;)u.data?t.push(u.data):L(u,t,n,r,o),u=u.nextSibling;else for(;u;)L(u,t,n,r,o),u=u.nextSibling;t.push("</",s,">")}else t.push("/>");return;case ee:case ne:for(var u=e.firstChild;u;)L(u,t,n,r,o),u=u.nextSibling;return;case X:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,m),'"');case H:return t.push(e.data.replace(/[<&]/g,m));case W:return t.push("<![CDATA[",e.data,"]]>");case K:return t.push("\x3c!--",e.data,"--\x3e");case te:var d=e.publicId,v=e.systemId;if(t.push("<!DOCTYPE ",e.name),d)t.push(' PUBLIC "',d),v&&"."!=v&&t.push('" "',v),t.push('">');else if(v&&"."!=v)t.push(' SYSTEM "',v,'">');else{var b=e.internalSubset;b&&t.push(" [",b,"]"),t.push(">")}return;case J:return t.push("<?",e.target," ",e.data,"?>");case Q:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Y(e,t,n){var r;switch(t.nodeType){case q:r=t.cloneNode(!1),r.ownerDocument=e;case ne:break;case X:n=!0}if(r||(r=t.cloneNode(!1)),r.ownerDocument=e,r.parentNode=null,n)for(var o=t.firstChild;o;)r.appendChild(Y(e,o,n)),o=o.nextSibling;return r}function B(e,t,n){var r=new t.constructor;for(var o in t){var i=t[o];"object"!=(void 0===i?"undefined":V(i))&&i!=r[o]&&(r[o]=i)}switch(t.childNodes&&(r.childNodes=new a),r.ownerDocument=e,r.nodeType){case q:var u=t.attributes,s=r.attributes=new c,l=u.length;s._ownerElement=r;for(var f=0;f<l;f++)r.setAttributeNode(B(e,u.item(f),!0));break;case X:n=!0}if(n)for(var p=t.firstChild;p;)r.appendChild(B(e,p,n)),p=p.nextSibling;return r}function $(e,t,n){e[t]=n}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G="http://www.w3.org/1999/xhtml",z={},q=z.ELEMENT_NODE=1,X=z.ATTRIBUTE_NODE=2,H=z.TEXT_NODE=3,W=z.CDATA_SECTION_NODE=4,Q=z.ENTITY_REFERENCE_NODE=5,Z=z.ENTITY_NODE=6,J=z.PROCESSING_INSTRUCTION_NODE=7,K=z.COMMENT_NODE=8,ee=z.DOCUMENT_NODE=9,te=z.DOCUMENT_TYPE_NODE=10,ne=z.DOCUMENT_FRAGMENT_NODE=11,re=z.NOTATION_NODE=12,oe={},ie={},ae=(oe.INDEX_SIZE_ERR=(ie[1]="Index size error",1),oe.DOMSTRING_SIZE_ERR=(ie[2]="DOMString size error",2),oe.HIERARCHY_REQUEST_ERR=(ie[3]="Hierarchy request error",3)),ue=(oe.WRONG_DOCUMENT_ERR=(ie[4]="Wrong document",4),oe.INVALID_CHARACTER_ERR=(ie[5]="Invalid character",5),oe.NO_DATA_ALLOWED_ERR=(ie[6]="No data allowed",6),oe.NO_MODIFICATION_ALLOWED_ERR=(ie[7]="No modification allowed",7),oe.NOT_FOUND_ERR=(ie[8]="Not found",8)),se=(oe.NOT_SUPPORTED_ERR=(ie[9]="Not supported",9),oe.INUSE_ATTRIBUTE_ERR=(ie[10]="Attribute in use",10));oe.INVALID_STATE_ERR=(ie[11]="Invalid state",11),oe.SYNTAX_ERR=(ie[12]="Syntax error",12),oe.INVALID_MODIFICATION_ERR=(ie[13]="Invalid modification",13),oe.NAMESPACE_ERR=(ie[14]="Invalid namespace",14),oe.INVALID_ACCESS_ERR=(ie[15]="Invalid access",15);i.prototype=Error.prototype,r(oe,i),a.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],r=0;r<this.length;r++)L(this[r],n,e,t);return n.join("")}},u.prototype.item=function(e){return s(this),this[e]},o(u,a),c.prototype={length:0,item:a.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new i(se);var n=this.getNamedItem(e.nodeName);return f(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new i(se);return t=this.getNamedItemNS(e.namespaceURI,e.localName),f(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return p(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return p(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var r=this[n];if(r.localName==t&&r.namespaceURI==e)return r}return null}},h.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var r=new b;if(r.implementation=this,r.childNodes=new a,r.doctype=n,n&&r.appendChild(n),t){var o=r.createElementNS(e,t);r.appendChild(o)}return r},createDocumentType:function(e,t,n){var r=new P;return r.name=e,r.nodeName=e,r.publicId=t,r.systemId=n,r}},d.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return N(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return w(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return B(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==H&&e.nodeType==H?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var r in n)if(n[r]==e)return r;t=t.nodeType==X?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==X?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(z,d),r(z,d.prototype),b.prototype={nodeName:"#document",nodeType:ee,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==ne){for(var n=e.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,t),n=r}return e}return null==this.documentElement&&e.nodeType==q&&(this.documentElement=e),N(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),w(this,e)},importNode:function(e,t){return Y(this,e,t)},getElementById:function(e){var t=null;return v(this.documentElement,function(n){if(n.nodeType==q&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new x;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new a,(t.attributes=new c)._ownerElement=t,t},createDocumentFragment:function(){var e=new A;return e.ownerDocument=this,e.childNodes=new a,e},createTextNode:function(e){var t=new R;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new j;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new T;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new I;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new E;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new C;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new x,r=t.split(":"),o=n.attributes=new c;return n.childNodes=new a,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,o._ownerElement=n,n},createAttributeNS:function(e,t){var n=new E,r=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=t,n}},o(b,d),x.prototype={nodeType:q,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===ne?this.insertBefore(e,null):O(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var r=this.ownerDocument.createAttributeNS(e,t);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new u(this,function(t){var n=[];return v(t,function(r){r===t||r.nodeType!=q||"*"!==e&&r.tagName!=e||n.push(r)}),n})},getElementsByTagNameNS:function(e,t){return new u(this,function(n){var r=[];return v(n,function(o){o===n||o.nodeType!==q||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||r.push(o)}),r})}},b.prototype.getElementsByTagName=x.prototype.getElementsByTagName,b.prototype.getElementsByTagNameNS=x.prototype.getElementsByTagNameNS,o(x,d),E.prototype.nodeType=X,o(E,d),k.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ie[ae])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},o(k,d),R.prototype={nodeName:"#text",nodeType:H,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},o(R,k),j.prototype={nodeName:"#comment",nodeType:K},o(j,k),T.prototype={nodeName:"#cdata-section",nodeType:W},o(T,k),P.prototype.nodeType=te,o(P,d),S.prototype.nodeType=re,o(S,d),D.prototype.nodeType=Z,o(D,d),C.prototype.nodeType=Q,o(C,d),A.prototype.nodeName="#document-fragment",A.prototype.nodeType=ne,o(A,d),I.prototype.nodeType=J,o(I,d),M.prototype.serializeToString=function(e,t,n){return F.call(e,t,n)},d.prototype.toString=F;try{if(Object.defineProperty){var ce=function e(t){switch(t.nodeType){case q:case ne:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}};Object.defineProperty(u.prototype,"length",{get:function(){return s(this),this.$$length}}),Object.defineProperty(d.prototype,"textContent",{get:function(){return ce(this)},set:function(e){switch(this.nodeType){case q:case ne:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),$=function(e,t,n){e["$$"+t]=n}}}catch(e){}t.DOMImplementation=h,t.XMLSerializer=M},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),s=n(1),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"#text"===e}},{key:"init",value:function(e,t){this.setNextNode(s.default(t.next_stack))}},{key:"eval",value:function(e,t){return e.sentence_components.push(" "),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.sentence_components.push(" "),e.delegateYield(this.next().gen(t),"t0",2);case 2:t.sentence_components.pop();case 3:case"end":return e.stop()}},e,this)})}]),t}(u.PhraseNode);t.SpaceNode=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(1),c=n(6),l=n(5),f=n(16),p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"if"===e}},{key:"evalLogic",value:function(e){for(var t=[],n=this.__logic_stack.slice(0),r=n.pop();r;){if(f.isOperator(r)){if("!"===r){var o=t.pop();t.push(!o)}else if("&"===r){var i=t.pop(),a=t.pop();t.push(i&&a)}else if("|"===r){var u=t.pop(),s=t.pop();t.push(u||s)}}else t.push(function(){if(r in e.data)return!!e.data[r];if("#"===r[0])return!!e.id_render_map[r.substr(1)];if("."===r[0])return!!e.class_render_map[r.substr(1)];throw new Error('"'+r+'" not found in data.')}());r=n.pop()}return t[0]}},{key:"init",value:function(e,t){if(!e.hasAttribute("condition"))throw new Error("A condition must be specified in <if/>");var n=e.getAttribute("condition");if(!n.trim())throw new Error("Condition is empty in <if/>");this.__logic_stack=f.default(n).reverse();var r=c.default(l.default,["then","else"]),o=Array(e.childNodes.length).fill("").map(function(t,n){return e.childNodes.item(n)}).filter(function(e){return"then"===e.nodeName||"else"===e.nodeName}).sort(function(e,t){return Number(e.nodeName<t.nodeName)});2===o.length?(this.__then=r.then(o[0],t),this.__else=r.else(o[1],t)):1===o.length?"then"===o[0].nodeName?(this.__then=r.then(o[0],t),this.__else=s.default(t.next_stack)):(this.__then=s.default(t.next_stack),this.__else=r.else(o[0],t)):0===o.length&&(this.__then=r.then(e,t),this.__else=s.default(t.next_stack)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.evalLogic(e)?this.__then.eval(e):this.__else.eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.evalLogic(t)?this.__then.gen(t):this.__else.gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.IfNode=p},function(e,t,n){"use strict";var r=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(r);o.default.compile("<sentence><maybe>Potato</maybe></sentence>"),document.getElementsByClassName("try-window")[0]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=n(14),u=n(29),s=function(){function e(t){r(this,e),this.__sentence=t}return o(e,[{key:"makeEvalPacket",value:function(e){return{data:e,sentence_components:[],id_render_map:{},class_render_map:{}}}},{key:"makePresentable",value:function(e){return e.join("").replace(/\s+/gi," ").replace(/\r/gi,"").replace(/\s+\n/gi,"\n").replace(/\n\s+/gi,"\n").trim()}},{key:"random",value:function(e){return this.makePresentable(this.__sentence.eval(this.makeEvalPacket(e)).sentence_components)}},{key:"iterate",value:regeneratorRuntime.mark(function e(t){var n,r,o,i,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.__sentence.gen(this.makeEvalPacket(t)),r=!0,o=!1,i=void 0,e.prev=4,a=n[Symbol.iterator]();case 6:if(r=(u=a.next()).done){e.next=13;break}return s=u.value,e.next=10,this.makePresentable(s.sentence_components);case 10:r=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),o=!0,i=e.t0;case 19:e.prev=19,e.prev=20,!r&&a.return&&a.return();case 22:if(e.prev=22,!o){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}},e,this,[[4,15,19,27],[20,,22,26]])})}],[{key:"compile",value:function(t){return new e(new a.SentenceNode((new i.DOMParser).parseFromString(t).documentElement,{ignore_spaces:[!1],next_stack:[u.default()],id_map:{}}))}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){this.options=e||{locator:{}}}function o(e,t,n){function r(t){var r=e[t];!r&&a&&(r=2==e.length?function(n){e(t,n)}:e),o[t]=r&&function(e){r("[xmldom "+t+"]\t"+e+u(n))}||function(){}}if(!e){if(t instanceof i)return t;e=t}var o={},a=e instanceof Function;return n=n||{},r("warning"),r("error"),r("fatalError"),o}function i(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function u(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}r.prototype.parseFromString=function(e,t){var n=this.options,r=new l,a=n.domBuilder||new i,u=n.errorHandler,s=n.locator,c=n.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return s&&a.setDocumentLocator(s),r.errorHandler=o(u,a,s),r.domBuilder=n.domBuilder||a,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,f):r.errorHandler.error("invalid doc source"),a.doc},i.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,r){var o=this.doc,i=o.createElementNS(e,n||t),u=r.length;c(this,i),this.currentElement=i,this.locator&&a(this.locator,i);for(var s=0;s<u;s++){var e=r.getURI(s),l=r.getValue(s),n=r.getQName(s),f=o.createAttributeNS(e,n);this.locator&&a(r.getLocator(s),f),f.value=f.nodeValue=l,i.setAttributeNode(f)}},endElement:function(e,t,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,n),c(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(e);else var r=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(e)&&this.doc.appendChild(r),this.locator&&a(this.locator,r)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=s.apply(this,arguments);var r=this.doc.createComment(e);this.locator&&a(this.locator,r),c(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(e,t,n);this.locator&&a(this.locator,o),c(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,u(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,u(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,u(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}});var l=n(13).XMLReader,f=t.DOMImplementation=n(7).DOMImplementation;t.XMLSerializer=n(7).XMLSerializer,t.DOMParser=r},function(e,t,n){"use strict";function r(){}function o(e,t,n,r,o){function l(e){if(e>65535){e-=65536;var t=55296+(e>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}function d(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?l(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function m(t){if(t>O){var n=e.substring(O,t).replace(/&#?\w+;/g,d);_&&v(O),r.characters(n,0,t-O),O=t}}function v(t,n){for(;t>=y&&(n=g.exec(e));)b=n.index,y=b+n[0].length,_.lineNumber++;_.columnNumber=t-b+1}for(var b=0,y=0,g=/.*(?:\r\n?|\n)|.*$/g,_=r.locator,w=[{currentNSMap:t}],N={},O=0;;){try{var x=e.indexOf("<",O);if(x<0){if(!e.substr(O).match(/^\s*$/)){var E=r.doc,k=E.createTextNode(e.substr(O));E.appendChild(k),r.currentElement=k}return}switch(x>O&&m(x),e.charAt(x+1)){case"/":var R=e.indexOf(">",x+3),j=e.substring(x+2,R),T=w.pop();R<0?(j=e.substring(x+2).replace(/[\s<].*/,""),o.error("end tag name: "+j+" is not complete:"+T.tagName),R=x+1+j.length):j.match(/\s</)&&(j=j.replace(/[\s<].*/,""),o.error("end tag name: "+j+" maybe not complete"),R=x+1+j.length);var P=T.localNSMap,S=T.tagName==j;if(S||T.tagName&&T.tagName.toLowerCase()==j.toLowerCase()){if(r.endElement(T.uri,T.localName,j),P)for(var D in P)r.endPrefixMapping(D);S||o.fatalError("end tag name: "+j+" is not match the current start tagName:"+T.tagName)}else w.push(T);R++;break;case"?":_&&v(x),R=p(e,x,r);break;case"!":_&&v(x),R=f(e,x,r,o);break;default:_&&v(x);var C=new h,A=w[w.length-1].currentNSMap,R=a(e,x,C,A,d,o),I=C.length;if(!C.closed&&c(e,R,C.tagName,N)&&(C.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),_&&I){for(var M=i(_,{}),F=0;F<I;F++){var U=C[F];v(U.offset),U.locator=i(_,{})}r.locator=M,u(C,r,A)&&w.push(C),r.locator=_}else u(C,r,A)&&w.push(C);"http://www.w3.org/1999/xhtml"!==C.uri||C.closed?R++:R=s(e,R,C.tagName,d,r)}}catch(e){o.error("element parse error: "+e),R=-1}R>O?O=R:m(Math.max(x,O)+1)}}function i(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function a(e,t,n,r,o,i){for(var a,u,s=++t,c=g;;){var l=e.charAt(s);switch(l){case"=":if(c===_)a=e.slice(t,s),c=N;else{if(c!==w)throw new Error("attribute equal must after attrName");c=N}break;case"'":case'"':if(c===N||c===_){if(c===_&&(i.warning('attribute value must after "="'),a=e.slice(t,s)),t=s+1,!((s=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");u=e.slice(t,s).replace(/&#?\w+;/g,o),n.add(a,u,t-1),c=x}else{if(c!=O)throw new Error('attribute value must after "="');u=e.slice(t,s).replace(/&#?\w+;/g,o),n.add(a,u,t),i.warning('attribute "'+a+'" missed start quot('+l+")!!"),t=s+1,c=x}break;case"/":switch(c){case g:n.setTagName(e.slice(t,s));case x:case E:case k:c=k,n.closed=!0;case O:case _:case w:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),c==g&&n.setTagName(e.slice(t,s)),s;case">":switch(c){case g:n.setTagName(e.slice(t,s));case x:case E:case k:break;case O:case _:u=e.slice(t,s),"/"===u.slice(-1)&&(n.closed=!0,u=u.slice(0,-1));case w:c===w&&(u=a),c==O?(i.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===r[""]&&u.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),n.add(u,u,t));break;case N:throw new Error("attribute value missed!!")}return s;case"":l=" ";default:if(l<=" ")switch(c){case g:n.setTagName(e.slice(t,s)),c=E;break;case _:a=e.slice(t,s),c=w;break;case O:var u=e.slice(t,s).replace(/&#?\w+;/g,o);i.warning('attribute "'+u+'" missed quot(")!!'),n.add(a,u,t);case x:c=E}else switch(c){case w:n.tagName;"http://www.w3.org/1999/xhtml"===r[""]&&a.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),n.add(a,a,t),t=s,c=_;break;case x:i.warning('attribute space is required"'+a+'"!!');case E:c=_,t=s;break;case N:c=O,t=s;break;case k:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function u(e,t,n){for(var r=e.tagName,o=null,i=e.length;i--;){var a=e[i],u=a.qName,s=a.value,c=u.indexOf(":");if(c>0)var f=a.prefix=u.slice(0,c),p=u.slice(c+1),h="xmlns"===f&&p;else p=u,f=null,h="xmlns"===u&&"";a.localName=p,!1!==h&&(null==o&&(o={},l(n,n={})),n[h]=o[h]=s,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(h,s))}for(var i=e.length;i--;){a=e[i];var f=a.prefix;f&&("xml"===f&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==f&&(a.uri=n[f||""]))}var c=r.indexOf(":");c>0?(f=e.prefix=r.slice(0,c),p=e.localName=r.slice(c+1)):(f=null,p=e.localName=r);var d=e.uri=n[f||""];if(t.startElement(d,p,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=o,!0;if(t.endElement(d,p,r),o)for(f in o)t.endPrefixMapping(f)}function s(e,t,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(n)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,r),o.characters(a,0,a.length),i)}return t+1}function c(e,t,n,r){var o=r[n];return null==o&&(o=e.lastIndexOf("</"+n+">"),o<t&&(o=e.lastIndexOf("</"+n)),r[n]=o),o<t}function l(e,t){for(var n in e)t[n]=e[n]}function f(e,t,n,r){switch(e.charAt(t+2)){case"-":if("-"===e.charAt(t+3)){var o=e.indexOf("--\x3e",t+4);return o>t?(n.comment(e,t+4,o-t-4),o+3):(r.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,o-t-9),n.endCDATA(),o+3}var i=m(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var u=i[1][0],s=a>3&&/^public$/i.test(i[2][0])&&i[3][0],c=a>4&&i[4][0],l=i[a-1];return n.startDTD(u,s&&s.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function p(e,t,n){var r=e.indexOf("?>",t);if(r){var o=e.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return n.processingInstruction(o[1],o[2]),r+2}return-1}return-1}function h(e){}function d(e,t){return e.__proto__=t,e}function m(e,t){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=t,o.exec(e);n=o.exec(e);)if(r.push(n),n[1])return r}var v=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=new RegExp("[\\-\\.0-9"+v.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),y=new RegExp("^"+v.source+b.source+"*(?::"+v.source+b.source+"*)?$"),g=0,_=1,w=2,N=3,O=4,x=5,E=6,k=7;r.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),l(t,t={}),o(e,t,n,r,this.errorHandler),r.endDocument()}},h.prototype={setTagName:function(e){if(!y.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!y.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},d({},d.prototype)instanceof d||(d=function(e,t){function n(){}n.prototype=t,n=new n;for(t in e)n[t]=e[t];return n}),t.XMLReader=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"sentence"===e}},{key:"init",value:function(e,t){var n={};!function e(t){if("#text"!==t.nodeName&&"ref"!==t.nodeName){if(t.hasAttributes()&&t.hasAttribute("id")){var r=t.getAttribute("id");if(r in n)throw new Error('Duplicate ID detedted "'+r+'"');return void(n[r]=t)}for(var o=t.childNodes.length,i=0;i<o;i++)e(t.childNodes.item(i))}}(e),t.id_map=n,this.setNextNode(s.default.call(this,e,t,c.default))}},{key:"eval",value:function(e,t){return this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.next().gen(t),"t0",1);case 1:case"end":return e.stop()}},e,this)})}]),t}(u.PhraseNode);t.SentenceNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"text"===e}},{key:"init",value:function(e,t){this.setNextNode(s.default.call(this,e,t,c.default)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.TextNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.isOperator=function(e){return e in{"&":!0,"|":!0,"!":!0}},t.precedence=function(e){return{"&":2,"|":1,"!":3}[e]},t.default=function(e){var n=[],o=[],i=[],a=function(){return!!i.length&&o.push(i.join(""))&&(i=[])&&!0};return e.replace(/\s/gi,"").split("").forEach(function(e){if("("===e)a(),n.push("(");else if(")"===e){a();for(var u=n.pop();u&&"("!==u;)o.push(u),u=n.pop()}else if(t.isOperator(e)){for(a();r.default(n)&&t.precedence(r.default(n))>t.precedence(e);)o.push(n.pop());n.push(e)}else i.push(e)}),a(),o.concat(n.reverse())}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(1),c=n(2),l=n(3),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"maybe"===e}},{key:"init",value:function(e,t){this.setNextNode(c.default.call(this,e,t,l.default)),this.__skip=s.default(t.next_stack),this.registararGenerate(e)}},{key:"eval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(453745*Math.random());return!!(1&t)&&this.registerRender(e),[this.__skip,this.__next_node][1&t].eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:return this.deregisterRender(t),e.delegateYield(this.__skip.gen(t),"t1",4);case 4:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.MaybeNode=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(6),c=n(5),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"either"===e}},{key:"init",value:function(e,t){for(var n=[],r=s.default(c.default,["this","or"]),o=e.childNodes.length,i=o-1;i>-1;i--){var a=e.childNodes.item(i);if("#text"!==a.nodeName){if(!(a.nodeName in r))throw new Error("Unrecognized tag <"+a.nodeName+">...</"+a.nodeName+"> under <either>...</either>");n.push(r[a.nodeName](a,t)),this.__routes=n}}this.registararGenerate(e)}},{key:"eval",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(Math.random()*Math.pow(2,16));return this.registerRender(e),this.__routes[t%this.__routes.length].eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){var n,r,o,i,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.registerRender(t),n=!0,r=!1,o=void 0,e.prev=4,i=this.__routes[Symbol.iterator]();case 6:if(n=(a=i.next()).done){e.next=12;break}return u=a.value,e.delegateYield(u.gen(t),"t0",9);case 9:n=!0,e.next=6;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(4),r=!0,o=e.t1;case 18:e.prev=18,e.prev=19,!n&&i.return&&i.return();case 21:if(e.prev=21,!r){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.deregisterRender(t);case 27:case"end":return e.stop()}},e,this,[[4,14,18,26],[19,,21,25]])})}]),t}(u.RefableNode);t.EitherNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(1),c=n(6),l=n(5),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"select"===e}},{key:"init",value:function(e,t){if(!e.hasAttribute("key"))throw new Error('<select/> must have a "key" attribute.');this.__key=e.getAttribute("key");for(var n={},r=c.default(l.default,["for"]),o=e.childNodes.length,i=0;i<o;i++){var a=e.childNodes.item(i),u=a.nodeName;if("for"!==u){if("default"===u){if(this.__default)throw new Error("Multiple <default/> in <select/>");this.__default=r.for(a,t);continue}if("#text"===u)continue;throw new Error("Unrecognized tag <"+u+">...</"+u+"> under <select>...</select>")}if(!a.hasAttribute("value"))throw new Error('<for>...</for> must have "value" attribute');var f=a.getAttribute("value");if(f in n)throw new Error('Duplicate value "'+f+'" in <select/>.');n[f]=r.for(a,t)}this.__default||(this.__default=s.default(t.next_stack)),this.__map=n,this.registararGenerate(e)}},{key:"eval",value:function(e,t){if(this.registerRender(e),!(this.__key in e.data))throw new Error('key "'+this.__key+'" not found in data.');var n=e.data[this.__key];return n in this.__map?this.__map[n].eval(e):this.__default.eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.registerRender(t),this.__key in t.data){e.next=3;break}throw new Error('key "'+this.__key+'" not found in data.');case 3:if(!((n=t.data[this.__key])in this.__map)){e.next=8;break}return e.delegateYield(this.__map[n].gen(t),"t0",6);case 6:e.next=9;break;case 8:return e.delegateYield(this.__default.gen(t),"t1",9);case 9:this.deregisterRender(t);case 10:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.SelectNode=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"for"===e||"default"===e}},{key:"init",value:function(e,t){this.setNextNode(s.default.call(this,e,t,c.default)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.ForNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var s=n(9),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"unless"===e}},{key:"evalLogic",value:function(e){return!u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"evalLogic",this).call(this,e)}}]),t}(s.IfNode);t.UnlessNode=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"then"===e||"if"===e||"unless"===e}},{key:"init",value:function(e,t){this.setNextNode(s.default.call(this,e,t,c.default)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.ThenNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"else"===e}},{key:"init",value:function(e,t){this.setNextNode(s.default.call(this,e,t,c.default)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.ElseNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"or"===e||"this"===e}},{key:"init",value:function(e,t){this.setNextNode(s.default.call(this,e,t,c.default)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.OrNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(1),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"data"===e}},{key:"init",value:function(e,t){if(!e.hasAttribute("key"))throw new Error("<data /> tags must include a key attribute.");var n=e.getAttribute("key").split("|");this.__evaulator=function(e){var t=n.find(function(t){return t in e.data});if(void 0===t)throw new Error('No data for keys "'+n.join(", ")+'"');return e.data[t]},this.setNextNode(s.default(t.next_stack)),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),e.sentence_components.push(this.__evaulator(e)),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),t.sentence_components.push(this.__evaulator(t)),e.delegateYield(this.next().gen(t),"t0",3);case 3:t.sentence_components.pop(),this.deregisterRender(t);case 5:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.DataNode=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),s=n(2),c=n(3),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"spaceless"===e}},{key:"init",value:function(e,t){t.ignore_spaces.push(!0),this.setNextNode(s.default.call(this,e,t,c.default)),t.ignore_spaces.pop(),this.registararGenerate(e)}},{key:"eval",value:function(e,t){return this.registerRender(e),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.registerRender(t),e.delegateYield(this.next().gen(t),"t0",2);case 2:this.deregisterRender(t);case 3:case"end":return e.stop()}},e,this)})}]),t}(u.RefableNode);t.SpacelessNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),s=n(1),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"#text"===e||"text"===e}},{key:"init",value:function(e,t){this.__value=s.default(t.ignore_spaces)?e.nodeValue.replace(/[\s\n\r]+/gi," ").trim():e.nodeValue.replace(/[\s\n\r]+/gi," "),this.setNextNode(s.default(t.next_stack))}},{key:"eval",value:function(e,t){return e.sentence_components.push(this.__value),this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.sentence_components.push(this.__value),e.delegateYield(this.next().gen(t),"t0",2);case 2:t.sentence_components.pop();case 3:case"end":return e.stop()}},e,this)})}]),t}(u.PhraseNode);t.RawTextNode=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),s=n(6),c=n(5),l=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return"ref"===e}},{key:"init",value:function(e,t){var n=s.default(c.default,["if","text","maybe","either","select","spaceless","unless","data"]);if(!e.hasAttribute("id"))throw new Error("<ref>...</ref> must have an ID attribute.");if(!e.getAttribute("id").trim())throw new Error("<ref>...</ref> must have an non empty ID attribute.");var r=e.getAttribute("id");if(!(r in t.id_map))throw new Error('Element with ID "'+r+'" not found.');var o=t.id_map[r];if(!(o.nodeName in n))throw new Error("<"+o.nodeName+">...</"+o.nodeName+"> cannot be reffered to.");this.setNextNode(n[o.nodeName](o,t))}},{key:"eval",value:function(e,t){return this.next().eval(e)}},{key:"gen",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this.next().gen(t),"t0",1);case 1:case"end":return e.stop()}},e,this)})}]),t}(u.PhraseNode);t.RefNode=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),s=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"validateNodeName",value:function(e){return!0}},{key:"init",value:function(e,t){}},{key:"eval",value:function(e,t){return e}}]),t}(u.PhraseNode);t.TerminusNode=s,t.default=function(){return new s("",{ignore_spaces:[],next_stack:[],id_map:{}})}}]);